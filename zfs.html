<!DOCTYPE html><html lang="fr"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>ZFS - blog.labperso.ovh</title><meta name="description" content="Dès que je vois des articles ou tuto parlant de ZFS alors qu’ils devraient parler d’OpenZFS, je constate que peut expliquent la technologie ZFS. Et&hellip;"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://nidouille.github.io/zfs.html"><link rel="alternate" type="application/atom+xml" href="https://nidouille.github.io/feed.xml" title="blog.labperso.ovh - RSS"><link rel="alternate" type="application/json" href="https://nidouille.github.io/feed.json" title="blog.labperso.ovh - JSON"><meta property="og:title" content="ZFS"><meta property="og:image" content="https://nidouille.github.io/media/posts/6/OIP-4.jpg"><meta property="og:image:width" content="474"><meta property="og:image:height" content="123"><meta property="og:site_name" content="blog.labperso.ovh"><meta property="og:description" content="Dès que je vois des articles ou tuto parlant de ZFS alors qu’ils devraient parler d’OpenZFS, je constate que peut expliquent la technologie ZFS. Et&hellip;"><meta property="og:url" content="https://nidouille.github.io/zfs.html"><meta property="og:type" content="article"><link rel="preload" href="https://nidouille.github.io/assets/dynamic/fonts/jetbrainsmono/jetbrainsmono.woff2" as="font" type="font/woff2" crossorigin><link rel="preload" href="https://nidouille.github.io/assets/dynamic/fonts/jetbrainsmono/jetbrainsmono-italic.woff2" as="font" type="font/woff2" crossorigin><link rel="stylesheet" href="https://nidouille.github.io/assets/css/style.css?v=0de5ed4b6a37ab1ddecf11b6f3d8bbb5"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://nidouille.github.io/zfs.html"},"headline":"ZFS","datePublished":"2021-10-14T00:00+02:00","dateModified":"2025-04-07T14:49+02:00","image":{"@type":"ImageObject","url":"https://nidouille.github.io/media/posts/6/OIP-4.jpg","height":123,"width":474},"description":"Dès que je vois des articles ou tuto parlant de ZFS alors qu’ils devraient parler d’OpenZFS, je constate que peut expliquent la technologie ZFS. Et&hellip;","author":{"@type":"Person","name":"Nida","url":"https://nidouille.github.io/authors/nida/"},"publisher":{"@type":"Organization","name":"Nida","logo":{"@type":"ImageObject","url":"https://nidouille.github.io/media/website/logo-stream-png.avif","height":false,"width":false}}}</script><noscript><style>img[loading] {
                    opacity: 1;
                }</style></noscript></head><body class="post-template"><div class="container container--center"><header class="header"><div class="header__logo"><a class="logo" href="https://nidouille.github.io/"><img src="https://nidouille.github.io/media/website/logo-stream-png.avif" alt="blog.labperso.ovh" width="" height=""></a></div></header><main class="content"><article class="post"><header><h1 class="post__title">ZFS</h1><div class="post__meta"><time datetime="2021-10-14T00:00" class="post__date">octobre 14, 2021</time></div></header><figure class="post__image post__cover"><img src="https://nidouille.github.io/media/posts/6/OIP-4.jpg" srcset="https://nidouille.github.io/media/posts/6/responsive/OIP-4-xs.jpg 300w, https://nidouille.github.io/media/posts/6/responsive/OIP-4-sm.jpg 480w, https://nidouille.github.io/media/posts/6/responsive/OIP-4-md.jpg 768w, https://nidouille.github.io/media/posts/6/responsive/OIP-4-lg.jpg 1024w" sizes="(min-width: 920px) 703px, (min-width: 700px) calc(82vw - 35px), calc(100vw - 81px)" loading="eager" height="123" width="474" alt=""></figure><div class="post__entry"><p>Dès que je vois des articles ou tuto parlant de ZFS alors qu’ils devraient parler d’OpenZFS, je constate que peut expliquent la technologie ZFS. Et je ne parle même pas de son histoire et évolution.</p><h2 id="petite-histoire-rapide">Petite histoire rapide</h2><p>ZFS a été créé chez SUN Microsystems pour le système d’exploitation Solaris au début des années 2000. Puis en 2005, SUN a passé Solaris en open sources via la licence CDDL qui donna naissance à Open Solaris et par conséquence ZFS est passé lui aussi open source sur la même licence.</p><p>Les premières intégrations sérieuses l’ont été sur FreeBSD 7 alors que des portages sur Linux via Fuse (<a href="http://zfs-on-fuse.blogspot.com/2006/12/first-alpha-of-zfs-on-fuse-with-write.html">2006</a>) et Mac OS X (par Apple) l’on précédé.</p><p>Mais un drame arriva, le rachat de SUN Microsystems par Oracle en 2009. Cela mit fin à la partie open source de ZFS et Open Solaris supporté par Oracle. Mais le monde du libre a repris les différents codes pour donner naissance à OpenZFS et illuminos.</p><p>Les choses deviennent intéressantes pour ZFS et OpenZFS, le premier, est maintenant fermé et le dernier lui est ouvert. Comment faire pour ne pas se tirer une balle dans le pied pour OpenZFS. Au moment de la fermeture, des sources ZFS étaient en version 28 et Oracle a continuer de le développer. Impossible de reprendre les numéros de version utilisés par ZFS dans OpenZFS, il alors été décidé qu’OpenZFS commencerait en version 5000, cela devrait éviter les soucis de se marcher sur les pieds. Jusqu’à maintenant, ça fonctionne bien. La version de ZFS par Oracle est la 48, mais OpenZFS garde une compatibilité jusqu’à la version 35.</p><p>Dernièrement, OpenZFS (décembre 2020) est sortie en version 2.0 (dernière monture du code : 2.0.6) avec de sacré avancés techniques dépassant largement une meilleure intégration dans Linux. La version 3 devrait s’attaquer à Mac OS.</p><h2 id="un-peu-de-technique">Un peu de technique</h2><p>ZFS est plus qu’un système de fichier, cela englobe une partie des fonctions dédiées à du hardware sur les cartes RAID.</p><p><img src="https://blog.labperso.ovh/images/zfs.png" alt="ZFS" loading="lazy" data-is-external-image="true"></p><p>Le Zpool est un espace de stockage virtuel qui est basé sur des Vdev.</p><p>Ses Vdevs sont des Virtual devices. Ils sont constitués par des périphériques en mode bloc comme des disques dur complets (ce qui est recommandé) ou de partition ou même de fichier. Ce sont sur ses Vdevs que l’on va configurer le “RAID” en mode stripe (raid 0), miror (raid 1 et même le 10) et les fameux RAID-Z qui correspondent aux différents niveau de parité. De mémoire jusqu’à 3 disques de parité via le RAID-Z 3 qui peut être vu comme du raid 7.</p><p>Ensuite, il ne faut surtout pas négliger les différents type de cache.</p><ul><li>ARC (en ram) ou L2ARC (ssd) : cache de lecture volatile</li><li>ZIL : cache d’écriture non volatile</li><li>SLOG (Separate Intent Log) : cache d’écriture volatile</li></ul><p>C’est une petite explication rapide du fonctionnement du ZFS en dessous du système de fichier et des zvol. Le Zvol est aussi très intéressant.</p><p>Ne me demandez pas de comparer avec Btrfs, ne l’ayant pas utilisé, je ne me suis jamais intéressée de son fonctionnement.</p></div><footer class="wrapper post__footer"><p class="post__last-updated">This article was updated on avril 7, 2025</p><div class="post__share"></div></footer><nav class="pagination"><div class="pagination__title"><span>Read other posts</span></div><div class="pagination__buttons"><a href="https://nidouille.github.io/benchmark-dhyperviseurs.html" class="btn previous" rel="prev" aria-label="[MISSING TRANSLATION]:  Benchmark de solution de virtualisation "><span class="btn__icon">←</span> <span class="btn__text">Benchmark de solution de virtualisation</span> </a><a href="https://nidouille.github.io/le-datacenter-le-plus-classe-du-monde.html" class="btn next" rel="next" aria-label="[MISSING TRANSLATION]:  Le datacenter le plus classe du monde "><span class="btn__text">Le datacenter le plus classe du monde</span> <span class="btn__icon">→</span></a></div></nav></article></main><footer class="footer"><div class="footer__inner"><div class="footer__copyright"><p>© 2024 Powered by Publii CMS :: <a href="https://github.com/panr/hugo-theme-terminal" target="_blank" rel="noopener">Theme</a> ported by the <a href="https://getpublii.com/customization-service/" target="_blank" rel="noopener">Publii Team</a></p></div></div></footer></div><script defer="defer" src="https://nidouille.github.io/assets/js/scripts.min.js?v=c2232aa7558e9517946129d2a1b8c770"></script><script>window.publiiThemeMenuConfig={mobileMenuMode:'sidebar',animationSpeed:300,submenuWidth: 'auto',doubleClickTime:500,mobileMenuExpandableSubmenus:true,relatedContainerForOverlayMenuSelector:'.top'};</script><script>var images = document.querySelectorAll('img[loading]');
        for (var i = 0; i < images.length; i++) {
            if (images[i].complete) {
                images[i].classList.add('is-loaded');
            } else {
                images[i].addEventListener('load', function () {
                    this.classList.add('is-loaded');
                }, false);
            }
        }</script></body></html>